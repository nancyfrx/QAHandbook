## <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"></font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">åœºæ™¯</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ï¼šå‡Œæ™¨2ç‚¹çš„ç›‘æ§å‘Šè­¦ç‚¸äº†ï¼æ–°ä¸Šçº¿çš„ç”µå•†æ´»åŠ¨é¡µé¢å“åº”ä»200msé£™å‡åˆ°8ç§’ï¼Œç”¨æˆ·æŠ•è¯‰å¦‚æ½®æ°´èˆ¬æ¶Œæ¥â€¦â€¦æŠ€æœ¯å›¢é˜Ÿæ’æŸ¥4å°æ—¶ï¼Œæœ€åå‘ç°ç«Ÿæ˜¯æŸæ®µç”¨äº†åå¹´çš„ç¥–ä¼ ä»£ç åŸ‹ä¸‹çš„æ€§èƒ½ç‚¸å¼¹</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’£</font>

<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">åœ¨åå¤šå¹´çš„æ¶æ„å¸ˆç”Ÿæ¶¯ä¸­ï¼Œæˆ‘è§è¿‡å¤ªå¤šæœ¬å¯é¿å…çš„æ€§èƒ½ç¾éš¾ã€‚ä»Šå¤©æˆ‘ä»¬å°±ç”¨10ä¸ªçœŸå®è¡€æ¡ˆï¼Œæ­å¼€é‚£äº›æŠ«ç€ã€Œåˆç†è®¾è®¡ã€å¤–è¡£çš„æ€§èƒ½æ¯’è¯</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ§ª</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ”¥</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±ä¸€ï¼šN+1æŸ¥è¯¢æš´å‡»æ•°æ®åº“</font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">å…¸å‹åœºæ™¯</font>**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ï¼šåŠ è½½ç”¨æˆ·è®¢å•æ—¶å…ˆæŸ¥ç”¨æˆ·åˆ—è¡¨ï¼Œå†å¾ªç¯æŸ¥è¯¢æ¯ä¸ªç”¨æˆ·çš„è®¢å•</font>

```plain


// è‡´å‘½æ“ä½œï¼šäº§ç”Ÿ100æ¬¡SQLæŸ¥è¯¢
List<User> users = userDao.getAll();
for (User user : users) {
  List<Order> orders = orderDao.getByUserId(user.getId()); 
}
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> è§£è¯æ–¹æ¡ˆï¼š</font>**

```plain


/* ä¸€æ¡SQLæå®š */
SELECT * FROM orders 
WHERE user_id IN (SELECT id FROM users)
```

<font style="color:rgba(0, 0, 0, 0.4);background-color:rgb(252, 252, 252);">ğŸ“Œ</font><font style="color:rgba(0, 0, 0, 0.4);background-color:rgb(252, 252, 252);"> çœŸå®æ¡ˆä¾‹ï¼šæŸé‡‘èç³»ç»Ÿå› è¯¥é—®é¢˜å¯¼è‡´MySQLè¿æ¥æ± æ’‘çˆ†ï¼Œäº¤æ˜“ä¸­æ–­3å°æ—¶</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">âš¡</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±äºŒï¼šå¾ªç¯å‘é€HTTPè¯·æ±‚</font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">æ­»äº¡ä»£ç ç¤ºä¾‹ï¼š</font>**

```plain

# ä¸º100ä¸ªç”¨æˆ·è°ƒç”¨èº«ä»½éªŒè¯æœåŠ¡
for user_id in user_ids:
   requests.post('https://auth-service/api/verify', data=user_id)
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> ç»ˆææ•‘èµï¼šæ‰¹é‡æ¥å£æ”¹é€ </font>**

```plain

requests.post('https://auth-service/api/batch-verify', json=user_ids)
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸš«</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±ä¸‰ï¼šæ— è„‘åŒæ­¥é”ï¼ˆæ€§èƒ½ç»è‚‰æœºï¼‰</font>
```plain

var lock sync.Mutex

func UpdateCache() {
  lock.Lock() 
  defer lock.Unlock()
  // è€—æ—¶IOæ“ä½œ âŒ
  data := loadFromDatabase()
  cache.Set("key", data)
}
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é”ä¼˜åŒ–æ–¹æ¡ˆï¼š</font>**

```plain



func UpdateCache() {
  // åŒé‡æ£€æŸ¥é”å®šï¼ˆDCLPï¼‰
  if cache.Expired() {
    lock.Lock()
    defer lock.Unlock()
    if cache.Expired() { // å†æ¬¡æ£€æŸ¥
      go asyncReload() // å¼‚æ­¥åŠ è½½
    }
  }
}
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ“‰</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±å››ï¼šå¤§äº‹åŠ¡æ‹–å®æ•°æ®åº“ï¼ˆé“¶è¡Œè½¬è´¦æƒ¨æ¡ˆï¼‰</font>
```plain


BEGIN TRANSACTION;
-- 1. æ£€æŸ¥è´¦æˆ·ä½™é¢
-- 2. æ›´æ–°è½¬å‡ºè´¦æˆ·ï¼ˆè€—æ—¶200msï¼‰â³
-- 3. æ›´æ–°è½¬å…¥è´¦æˆ·ï¼ˆè€—æ—¶150msï¼‰âŒ›
-- 4. å†™å…¥äº¤æ˜“è®°å½•ï¼ˆè€—æ—¶300msï¼‰â³
COMMIT; # æ€»è€—æ—¶650msï¼
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> æ‹†è§£å¦™æ‹›ï¼š</font>**

```plain

# æ‹†åˆ†ä¸ºä¸‰ä¸ªç‹¬ç«‹äº‹åŠ¡
update_account_out() 
update_account_in() 
insert_transaction_log() # ä½¿ç”¨æœ€ç»ˆä¸€è‡´æ€§
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ§©</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±äº”ï¼šæ·±åˆ†é¡µæŸ¥è¯¢é›ªå´©</font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">é”™è¯¯å§¿åŠ¿ï¼š</font>**

```plain

SELECT * FROM orders 
ORDER BY id DESC 
LIMIT 1000000, 20; # æ‰«æç™¾ä¸‡æ•°æ®
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> ä¼˜åŒ–ç¥æ“ä½œï¼š</font>**

```plain


SELECT * FROM orders 
WHERE id < last_seen_id  -- åŸºäºæ¸¸æ ‡çš„åˆ†é¡µ
ORDER BY id DESC 
LIMIT 20;
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ›‘</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±å…­ï¼šç¼“å­˜ç©¿é€é£æš´ï¼ˆæ¶æ„è¯·æ±‚æ”»å‡»ï¼‰</font>
<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">https://mmbiz.qpic.cn/sz_mmbiz_jpg/1NOZY0PicfNJVgNc4J5Yk0HwvFkicV9eM0l1kQoVWlzBicrIicQibJaLt3ia9pO7j9xY8ibMfA7zQ/640?wx_fmt=jpeg  
</font>_<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">æ”»å‡»è€…ä¸æ–­è¯·æ±‚ä¸å­˜åœ¨çš„æ•°æ®</font>_

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ”¥</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é˜²å¾¡ç»„åˆæ‹³ï¼š</font>**

1. <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">å¸ƒéš†è¿‡æ»¤å™¨å‰ç½®æ‹¦æˆª</font>
2. <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ç©ºå€¼ç¼“å­˜ï¼š</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">cache.set(key, null, 10)</font>`
3. <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">è¯·æ±‚é™æµç†”æ–­</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ“š</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±ä¸ƒï¼šè¿‡åº¦æ—¥å¿—å¼•å‘IOæµ·å•¸</font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ä½œæ­»æ¡ˆä¾‹ï¼š</font>**

```plain


app.use((req, res) => {
  console.log(`${new Date()} - ${req.url}`); // æ¯æ¬¡è¯·æ±‚éƒ½å†™ç£ç›˜ï¼
})
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> æ•‘ä¸–æ–¹æ¡ˆï¼š</font>**

```plain


// ä½¿ç”¨å†…å­˜ç¼“å†²åŒº+å¼‚æ­¥æ‰¹é‡å†™å…¥
const logger = new BulkWriter({ 
  flushInterval: 1000 
})
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ¯</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±å…«ï¼šåºåˆ—åŒ–/ååºåˆ—åŒ–æš—å‘</font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">Pythonè‡´å‘½æ“ä½œï¼š</font>**

```plain

import pickle

# åºåˆ—åŒ–3MBæ•°æ®
data = pickle.dumps(large_object)  # CPUé£™å‡ï¼
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é«˜æ•ˆæ›¿ä»£å“ï¼š</font>**

```plain

import orjson  # Rustå®ç°çš„è¶…é€ŸJSONåº“
orjson.dumps(large_object)
```

<font style="color:rgba(0, 0, 0, 0.4);background-color:rgb(252, 252, 252);">âœ…</font><font style="color:rgba(0, 0, 0, 0.4);background-color:rgb(252, 252, 252);"> æ€§èƒ½å¯¹æ¯”ï¼špickleï¼š120ms vs orjsonï¼š12ms</font>

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸŒª</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±ä¹ï¼šçº¿ç¨‹æ± é˜»å¡é£æš´</font>
**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">Javaäº‹æ•…ä»£ç ï¼š</font>**

```plain


ExecutorService pool = Executors.newFixedThreadPool(8);

pool.submit(() -> {
  Future<String> f1 = service1.call(); 
  f1.get(); // é˜»å¡çº¿ç¨‹ï¼
  
  Future<String> f2 = service2.call();
  return f2.get();
});
```

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ’¡</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> è§£å†³ä¹‹é“ï¼š</font>**

```plain

// ä½¿ç”¨CompletableFutureå¼‚æ­¥ç¼–æ’
CompletableFuture.supplyAsync(service1::call)
                .thenComposeAsync(service2::call)
                .thenAccept(System.out::println);
```

---

### <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ“¡</font><font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> é™·é˜±åï¼šå¾®æœåŠ¡é“¾è·¯æ— é™é€’å½’</font>
<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">https://mmbiz.qpic.cn/sz_mmbiz_png/1NOZY0PicfNJVgNc4J5Yk0HwvFkicV9eM0bicxQp4ibGiaLhXicAibg5tS7cJ0tJia9WfRzHZxWpCib1aQ/640?wx_fmt=png  
</font>_<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">AæœåŠ¡è°ƒB â†’ Bè°ƒC â†’ Cåˆè°ƒAçš„æ­»äº¡å¾ªç¯</font>_

**<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">ğŸ“Œ</font>****<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);"> ç»ˆæå¤§æ‹›ï¼š</font>**

1. <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">éƒ¨ç½²åˆ†å¸ƒå¼é“¾è·¯è¿½è¸ªï¼ˆå¦‚Jaegerï¼‰</font>
2. <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">è®¾ç½®æ·±åº¦ç†”æ–­æœºåˆ¶ï¼š</font>`<font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">if(call_depth > 5) throw CircuitBreakerException()</font>`
3. <font style="color:rgba(0, 0, 0, 0.9);background-color:rgb(252, 252, 252);">å®šæœŸè¿›è¡Œæ··æ²Œå·¥ç¨‹æµ‹è¯•</font>

